"use strict";const currentPage=document.documentElement.dataset.pagename;function addCss(e){let t=document.createElement("link");t.rel="stylesheet",t.href=e,document.head.appendChild(t)}function disableScrolling(){document.body.style.overflow="hidden"}function enableScrolling(){document.body.style.overflow="auto"}function loadHTML(e,t,a){let s,n=document.querySelector(e),r=t;if(r){(s=new XMLHttpRequest).onreadystatechange=function(){4==this.readyState&&(200==this.status?(n.innerHTML=this.responseText,"function"==typeof a&&a(),addIcons()):404==this.status&&(n.innerHTML='<h1 id="error">Error 404; Page not found.</h1>'))},s.open("GET",`/templates/${r}`,!0),s.send();return}}localStorage.getItem("config")||localStorage.setItem("config",JSON.stringify({theme:"device",language:"no",mapsConsent:"false"})),localStorage.getItem("gameData")||localStorage.setItem("gameData",JSON.stringify({simonGameScores:[],pongGameScores:[]}));class CustomNavbar extends HTMLElement{connectedCallback(){this.style.display="none",this.classList.add("navbar"),this.setAttribute("aria-label","Primary navbar."),loadHTML("custom-navbar","navbar.html",()=>{let e=document.querySelector(".navbar"),t=document.querySelectorAll(".navbar-link"),a=document.querySelector(".navbar-menuButton"),s=document.querySelector(".navbar-language"),n=document.querySelector(".navbar-appearance");a.addEventListener("click",()=>{e.classList.toggle("active"),n.classList.remove("active"),s.classList.remove("active"),document.addEventListener("click",a=>{t.forEach(t=>{t.contains(a.target)&&e.classList.remove("active")})})}),document.addEventListener("keydown",t=>{("Escape"===t.key||"Esc"===t.key)&&(n.classList.remove("active"),s.classList.remove("active"),e.classList.remove("active"))});let r=window.matchMedia("(min-width: 740px)");function o(t){t.matches&&(n.classList.remove("active"),s.classList.remove("active"),e.classList.remove("active"))}function c(){let e=window.scrollY,a=null,s=document.querySelectorAll("article"),n=s[0]||0,r=s[s.length-1]||0;document.querySelectorAll("article").forEach(t=>{let s=t.offsetTop-100,n=s+t.offsetHeight;e>=s&&e<=n&&(a=t)}),t.forEach(e=>{e.classList.remove("active"),a&&e.getAttribute("id").includes(a.id)?e.classList.add("active"):0===s.length&&e.getAttribute("id").includes(currentPage)&&e.classList.add("active")}),e<n.offsetTop-100&&(t.forEach(e=>e.classList.remove("active")),t.forEach(e=>e.getAttribute("id").includes(currentPage)?e.classList.add("active"):null)),e>r.offsetTop-100+r.offsetHeight&&(t.forEach(e=>e.classList.remove("active")),document.querySelector(`a[id="${r.id}Link"]`).classList.add("active"))}function i(e){e.target.matches(".navbar-link")&&(t.forEach(e=>e.classList.remove("active")),"mouseout"===e.type?c():"mouseover"===e.type&&e.target.classList.add("active"))}function l(){history.replaceState("",document.title,window.location.pathname+window.location.search)}r.addEventListener("change",o),o(r),document.addEventListener("scroll",c),window.addEventListener("popstate",l),document.querySelector(".navbar-links").addEventListener("mouseover",i),document.querySelector(".navbar-links").addEventListener("mouseout",i),c(),l(),changeTheme(JSON.parse(localStorage.getItem("config")).theme)})}}function navbarDrop(e){let t=document.querySelector(".navbar-language"),a=document.querySelector(".navbar-appearance"),s=document.querySelector(".navbar");"language"===e?(t.classList.toggle("active"),a.classList.remove("active"),s.classList.remove("active")):(a.classList.toggle("active"),t.classList.remove("active"),s.classList.remove("active")),document.addEventListener("click",e=>{t.contains(e.target)||t.classList.remove("active"),a.contains(e.target)||a.classList.remove("active")})}customElements.define("custom-navbar",CustomNavbar);class CustomFooter extends HTMLElement{connectedCallback(){this.style.display="none",this.setAttribute("id","footer"),this.setAttribute("aria-label","Primary footer."),loadHTML("custom-footer","footer.html",()=>{function e(){let e=JSON.parse(localStorage.getItem("config"));e.mapsConsent=!0,localStorage.setItem("config",JSON.stringify(e)),document.body.appendChild(document.createElement("script")).setAttribute("src","https://maps.googleapis.com/maps/api/js?key=AIzaSyCriq_RvddTjsYCd-uRVVIJROZpMYBVr0U&callback=Map")}!0===JSON.parse(localStorage.getItem("config")).mapsConsent&&e(),document.querySelector("#footer #map-consent-button").addEventListener("click",e)})}}function Map(){let e={lat:59.260573,lng:11.107192},t=new google.maps.Map(document.querySelector("#footer #map"),{zoom:12,center:e});new google.maps.Marker({position:e,map:t})}customElements.define("custom-footer",CustomFooter);let languageJSON;try{fetch("/assets/json/language.json").then(e=>e.json()).then(e=>{languageJSON=e.language,changeLanguage(JSON.parse(localStorage.getItem("config")).language)})}catch(e){console.error("Could not fetch language.json:",e)}function changeLanguage(e){let t=JSON.parse(localStorage.getItem("config"));t.language=e,localStorage.setItem("config",JSON.stringify(t)),document.documentElement.setAttribute("lang",e),document.querySelectorAll(".navbar-language button").forEach(t=>t.classList.toggle("underline",t.dataset.lang===e));try{try{Object.entries(languageJSON[e][currentPage]).forEach(([e,t])=>{let a=document.querySelectorAll(`#${e}`);a.forEach(e=>{e&&(e.innerHTML=t)})})}catch(a){console.error(`Page is not defined in language.json. ${a}`)}try{Object.entries(languageJSON[e].NavbarFooter).forEach(([e,t])=>{let a=document.querySelectorAll(`#${e}`);a.forEach(e=>{e&&(e.innerHTML=t)})})}catch(s){console.error(`Error attempting to apply language change to navbar or footer. ${s}`)}}catch(n){console.error(`Could not translate page! ${n}`)}let r=new CustomEvent("changeLanguageCalled");document.dispatchEvent(r)}function changeTheme(e){window.matchMedia("(prefers-color-scheme: dark)").addEventListener("change",()=>{"device"===e?document.body.className=window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light":document.body.className=e}),"device"===e?document.body.className=window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light":document.body.className=e,document.querySelectorAll(".navbar-appearance button").forEach(t=>t.classList.toggle("underline",t.dataset.theme===e));let t=JSON.parse(localStorage.getItem("config"));t.theme=e,localStorage.setItem("config",JSON.stringify(t))}const dropdownButtons=document.querySelectorAll("button[data-dropdown]");function dropdownToggle(e){dropdownButtons.forEach(t=>{e.dataset.dropdown===t.dataset.dropdown?document.querySelector("#"+e.dataset.dropdown).classList.toggle("hidden"):document.querySelector("#"+t.dataset.dropdown).classList.add("hidden")})}function addIcons(){document.querySelectorAll('[class^="icon-"], [class*=" icon-"]').forEach(e=>{let t="";for(let a=0;a<e.classList.length;a++)if(e.classList[a].startsWith("icon-")){t=e.classList[a];break}e.setAttribute("focusable",!1),e.setAttribute("aria-hidden",!0),e.setAttribute("viewBox","0 0 24 24"),e.setAttribute("height","1.4em"),e.innerHTML=`<use xlink:href="/assets/images/icons.svg#${t}"></use>`})}dropdownButtons.forEach(e=>{document.querySelector("#"+e.dataset.dropdown).classList.add("hidden"),e.addEventListener("click",()=>{dropdownToggle(e)})}),addIcons(),document.addEventListener("changeLanguageCalled",addIcons);