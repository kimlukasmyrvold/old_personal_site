"use strict";const currentPage=document.documentElement.dataset.pagename;function addCss(e){let t=document.createElement("link");t.rel="stylesheet",t.href=e,document.head.appendChild(t)}function disableScrolling(){document.body.style.overflow="hidden"}function enableScrolling(){document.body.style.overflow="auto"}function loadHTML(e,t,a){let s,r=document.querySelector(e),n=t;if(n){(s=new XMLHttpRequest).onreadystatechange=function(){4==this.readyState&&(200==this.status?(r.innerHTML=this.responseText,"function"==typeof a&&a(),addIcons()):404==this.status&&(r.innerHTML='<h1 id="error">Error 404; Page not found.</h1>'))},s.open("GET",`/templates/${n}`,!0),s.send();return}}localStorage.getItem("config")||localStorage.setItem("config",JSON.stringify({theme:"device",language:"no"})),localStorage.getItem("gameData")||localStorage.setItem("gameData",JSON.stringify({simonGameScores:[],pongGameScores:[]}));class CustomNavbar extends HTMLElement{connectedCallback(){this.style.display="none",this.classList.add("navbar"),this.setAttribute("aria-label","Primary navbar."),loadHTML("custom-navbar","navbar.html",()=>{let e=document.querySelector(".navbar"),t=document.querySelectorAll(".navbar-link"),a=document.querySelector(".navbar-menuButton"),s=document.querySelector(".navbar-language"),r=document.querySelector(".navbar-appearance");a.addEventListener("click",()=>{e.classList.toggle("active"),r.classList.remove("active"),s.classList.remove("active"),document.addEventListener("click",a=>{t.forEach(t=>{t.contains(a.target)&&e.classList.remove("active")})})}),document.addEventListener("keydown",t=>{("Escape"===t.key||"Esc"===t.key)&&(r.classList.remove("active"),s.classList.remove("active"),e.classList.remove("active"))});let n=window.matchMedia("(min-width: 740px)");function o(t){t.matches&&(r.classList.remove("active"),s.classList.remove("active"),e.classList.remove("active"))}function c(){let e=window.scrollY,a=null,s=document.querySelectorAll("article"),r=s[0]||0,n=s[s.length-1]||0;document.querySelectorAll("article").forEach(t=>{let s=t.offsetTop-100,r=s+t.offsetHeight;e>=s&&e<=r&&(a=t)}),t.forEach(e=>{e.classList.remove("active"),a&&e.getAttribute("id").includes(a.id)?e.classList.add("active"):0===s.length&&e.getAttribute("id").includes(currentPage)&&e.classList.add("active")}),e<r.offsetTop-100&&(t.forEach(e=>e.classList.remove("active")),t.forEach(e=>e.getAttribute("id").includes(currentPage)?e.classList.add("active"):null)),e>n.offsetTop-100+n.offsetHeight&&(t.forEach(e=>e.classList.remove("active")),document.querySelector(`a[id="${n.id}Link"]`).classList.add("active"))}function i(e){e.target.matches(".navbar-link")&&(t.forEach(e=>e.classList.remove("active")),"mouseout"===e.type?c():"mouseover"===e.type&&e.target.classList.add("active"))}function l(){history.replaceState("",document.title,window.location.pathname+window.location.search)}n.addEventListener("change",o),o(n),document.addEventListener("scroll",c),window.addEventListener("popstate",l),document.querySelector(".navbar-links").addEventListener("mouseover",i),document.querySelector(".navbar-links").addEventListener("mouseout",i),c(),l(),changeTheme(JSON.parse(localStorage.getItem("config")).theme)})}}function navbarDrop(e){let t=document.querySelector(".navbar-language"),a=document.querySelector(".navbar-appearance"),s=document.querySelector(".navbar");"language"===e?(t.classList.toggle("active"),a.classList.remove("active"),s.classList.remove("active")):(a.classList.toggle("active"),t.classList.remove("active"),s.classList.remove("active")),document.addEventListener("click",e=>{t.contains(e.target)||t.classList.remove("active"),a.contains(e.target)||a.classList.remove("active")})}customElements.define("custom-navbar",CustomNavbar);class CustomFooter extends HTMLElement{connectedCallback(){this.style.display="none",this.setAttribute("id","footer"),this.setAttribute("aria-label","Primary footer."),loadHTML("custom-footer","footer.html",()=>{let e=document.createElement("script");e.src="https://cdn.jsdelivr.net/npm/ol@v7.3.0/dist/ol.js",e.onload=function(){let e=new ol.Map({target:"map",layers:[new ol.layer.Tile({source:new ol.source.OSM})],view:new ol.View({center:ol.proj.fromLonLat([11.107192,59.260573]),zoom:14})}),t=new ol.Feature({geometry:new ol.geom.Point(ol.proj.fromLonLat([11.107192,59.260573]))}),a=new ol.source.Vector,s=new ol.layer.Vector({source:a});a.addFeature(t),e.addLayer(s);let r=new ol.style.Style({image:new ol.style.Icon({anchor:[.38,1],src:"/assets/images/map-marker.svg"})});t.setStyle(r),window.addEventListener("resize",function(){e.updateSize();let t=e.getView().calculateExtent(e.getSize());e.getView().fit(t,{size:e.getSize()})})},document.body.appendChild(e)})}}customElements.define("custom-footer",CustomFooter);let languageJSON;try{fetch("/assets/json/language.json").then(e=>e.json()).then(e=>{languageJSON=e.language,changeLanguage(JSON.parse(localStorage.getItem("config")).language)})}catch(e){console.error("Could not fetch language.json:",e)}function changeLanguage(e){let t=JSON.parse(localStorage.getItem("config"));t.language=e,localStorage.setItem("config",JSON.stringify(t)),document.documentElement.setAttribute("lang",e),document.querySelectorAll(".navbar-language button").forEach(t=>t.classList.toggle("underline",t.dataset.lang===e));try{try{Object.entries(languageJSON[e][currentPage]).forEach(([e,t])=>{let a=document.querySelectorAll(`#${e}`);a.forEach(e=>{e&&(e.innerHTML=t)})})}catch(a){console.error(`Page is not defined in language.json. ${a}`)}try{Object.entries(languageJSON[e].NavbarFooter).forEach(([e,t])=>{let a=document.querySelectorAll(`#${e}`);a.forEach(e=>{e&&(e.innerHTML=t)})})}catch(s){console.error(`Error attempting to apply language change to navbar or footer. ${s}`)}}catch(r){console.error(`Could not translate page! ${r}`)}let n=new CustomEvent("changeLanguageCalled");document.dispatchEvent(n)}function changeTheme(e){window.matchMedia("(prefers-color-scheme: dark)").addEventListener("change",()=>{"device"===e?document.body.className=window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light":document.body.className=e}),"device"===e?document.body.className=window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light":document.body.className=e,document.querySelectorAll(".navbar-appearance button").forEach(t=>t.classList.toggle("underline",t.dataset.theme===e));let t=JSON.parse(localStorage.getItem("config"));t.theme=e,localStorage.setItem("config",JSON.stringify(t))}const dropdownButtons=document.querySelectorAll("button[data-dropdown]");function dropdownToggle(e){dropdownButtons.forEach(t=>{e.dataset.dropdown===t.dataset.dropdown?document.querySelector("#"+e.dataset.dropdown).classList.toggle("hidden"):document.querySelector("#"+t.dataset.dropdown).classList.add("hidden")})}function addIcons(){document.querySelectorAll('[class^="icon-"], [class*=" icon-"]').forEach(e=>{let t="";for(let a=0;a<e.classList.length;a++)if(e.classList[a].startsWith("icon-")){t=e.classList[a];break}e.setAttribute("focusable",!1),e.setAttribute("aria-hidden",!0),e.setAttribute("viewBox","0 0 24 24"),e.setAttribute("height","1.4em"),e.innerHTML=`<use xlink:href="/assets/images/icons.svg#${t}"></use>`})}dropdownButtons.forEach(e=>{document.querySelector("#"+e.dataset.dropdown).classList.add("hidden"),e.addEventListener("click",()=>{dropdownToggle(e)})}),addIcons(),document.addEventListener("changeLanguageCalled",addIcons);