"use strict";const currentPage=document.documentElement.dataset.pagename;function addCss(e){let t=document.createElement("link");t.rel="stylesheet",t.href=e,document.head.appendChild(t)}function disableScrolling(){document.body.style.overflow="hidden"}function enableScrolling(){document.body.style.overflow="auto"}function loadHTML(e,t,a){let n,s=document.querySelector(e),r=t;if(r){(n=new XMLHttpRequest).onreadystatechange=function(){4==this.readyState&&(200==this.status?(s.innerHTML=this.responseText,"function"==typeof a&&a(),addIcons()):404==this.status&&(s.innerHTML='<h1 id="error">Error 404; Page not found.</h1>'))},n.open("GET",`/templates/${r}`,!0),n.send();return}}localStorage.getItem("config")||localStorage.setItem("config",JSON.stringify({theme:"device",language:"no"})),localStorage.getItem("gameData")||localStorage.setItem("gameData",JSON.stringify({simonGameScores:[],pongGameScores:[]}));class CustomNavbar extends HTMLElement{connectedCallback(){navbarInitiate(this)}}function navbarInitiate(e){e.style.display="none",e.classList.add("navbar"),e.setAttribute("aria-label","Primary navbar."),loadHTML("custom-navbar","navbar.html",()=>{navbarFunctionality()})}function navbarFunctionality(){let e=document.querySelector(".navbar"),t=document.querySelectorAll(".navbar-link"),a=document.querySelector(".navbar-menuButton"),n=document.querySelector(".navbar-language"),s=document.querySelector(".navbar-appearance");a.addEventListener("click",()=>{e.classList.toggle("active"),s.classList.remove("active"),n.classList.remove("active"),document.addEventListener("click",a=>{t.forEach(t=>{t.contains(a.target)&&e.classList.remove("active")})})}),document.addEventListener("keydown",t=>{("Escape"===t.key||"Esc"===t.key)&&(s.classList.remove("active"),n.classList.remove("active"),e.classList.remove("active"))});let r=window.matchMedia("(min-width: 740px)");function o(t){t.matches&&(s.classList.remove("active"),n.classList.remove("active"),e.classList.remove("active"))}function c(){let e=window.scrollY,a=null,n=document.querySelectorAll("article"),s=n[0]||0,r=n[n.length-1]||0;document.querySelectorAll("article").forEach(t=>{let n=t.offsetTop-100,s=n+t.offsetHeight;e>=n&&e<=s&&(a=t)}),t.forEach(e=>{e.classList.remove("active"),a&&e.getAttribute("id").includes(a.id)?e.classList.add("active"):0===n.length&&e.getAttribute("id").includes(currentPage)&&e.classList.add("active")}),e<s.offsetTop-100&&(t.forEach(e=>e.classList.remove("active")),t.forEach(e=>e.getAttribute("id").includes(currentPage)?e.classList.add("active"):null)),e>r.offsetTop-100+r.offsetHeight&&(t.forEach(e=>e.classList.remove("active")),document.querySelector(`a[id="${r.id}Link"]`).classList.add("active"))}function i(e){e.target.matches(".navbar-link")&&(t.forEach(e=>e.classList.remove("active")),"mouseout"===e.type?c():"mouseover"===e.type&&e.target.classList.add("active"))}function l(){history.replaceState("",document.title,window.location.pathname+window.location.search)}r.addEventListener("change",o),o(r),document.addEventListener("scroll",c),window.addEventListener("popstate",l),document.querySelector(".navbar-links").addEventListener("mouseover",i),document.querySelector(".navbar-links").addEventListener("mouseout",i),c(),l(),changeTheme(JSON.parse(localStorage.getItem("config")).theme)}function navbarDrop(e){let t=document.querySelector(".navbar-language"),a=document.querySelector(".navbar-appearance"),n=document.querySelector(".navbar");"language"===e?(t.classList.toggle("active"),a.classList.remove("active"),n.classList.remove("active")):(a.classList.toggle("active"),t.classList.remove("active"),n.classList.remove("active")),document.addEventListener("click",e=>{t.contains(e.target)||t.classList.remove("active"),a.contains(e.target)||a.classList.remove("active")})}customElements.define("custom-navbar",CustomNavbar);class CustomFooter extends HTMLElement{connectedCallback(){footerFunctions(this)}}function footerFunctions(e){e.style.display="none",e.setAttribute("id","footer"),e.setAttribute("aria-label","Primary footer."),loadHTML("custom-footer","footer.html",()=>{openLayers()})}function openLayers(){let e=document.createElement("script");e.src="https://cdn.jsdelivr.net/npm/ol@v7.3.0/dist/ol.js",e.onload=()=>{onloadOpenLayers()},document.body.appendChild(e)}function onloadOpenLayers(){let e=new ol.Map({target:"map",layers:[new ol.layer.Tile({source:new ol.source.OSM})],view:new ol.View({center:ol.proj.fromLonLat([11.107192,59.260573]),zoom:14})}),t=new ol.Feature({geometry:new ol.geom.Point(ol.proj.fromLonLat([11.107192,59.260573]))}),a=new ol.source.Vector,n=new ol.layer.Vector({source:a});a.addFeature(t),e.addLayer(n);let s=new ol.style.Style({image:new ol.style.Icon({anchor:[.38,1],src:"/assets/images/map-marker.svg"})});t.setStyle(s),window.addEventListener("resize",function(){e.updateSize();let t=e.getView().calculateExtent(e.getSize());e.getView().fit(t,{size:e.getSize()})})}customElements.define("custom-footer",CustomFooter);let languageJSON;try{fetch("/assets/json/language.json").then(e=>e.json()).then(e=>{languageJSON=e.language,changeLanguage(JSON.parse(localStorage.getItem("config")).language)})}catch(e){console.error("Could not fetch language.json:",e)}function changeLanguage(e){let t=JSON.parse(localStorage.getItem("config"));t.language=e,localStorage.setItem("config",JSON.stringify(t)),document.documentElement.setAttribute("lang",e),document.querySelectorAll(".navbar-language button").forEach(t=>t.classList.toggle("underline",t.dataset.lang===e));try{try{Object.entries(languageJSON[e][currentPage]).forEach(([e,t])=>{let a=document.querySelectorAll(`#${e}`);a.forEach(e=>{e&&(e.innerHTML=t)})})}catch(a){console.error(`Page is not defined in language.json. ${a}`)}try{Object.entries(languageJSON[e].NavbarFooter).forEach(([e,t])=>{let a=document.querySelectorAll(`#${e}`);a.forEach(e=>{e&&(e.innerHTML=t)})})}catch(n){console.error(`Error attempting to apply language change to navbar or footer. ${n}`)}}catch(s){console.error(`Could not translate page! ${s}`)}let r=new CustomEvent("changeLanguageCalled");document.dispatchEvent(r)}function changeTheme(e){window.matchMedia("(prefers-color-scheme: dark)").addEventListener("change",()=>{"device"===e?document.body.className=window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light":document.body.className=e}),"device"===e?document.body.className=window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light":document.body.className=e,document.querySelectorAll(".navbar-appearance button").forEach(t=>t.classList.toggle("underline",t.dataset.theme===e));let t=JSON.parse(localStorage.getItem("config"));t.theme=e,localStorage.setItem("config",JSON.stringify(t))}function manageDropdowns(){let e=document.querySelectorAll("button[data-dropdown]");e.forEach(t=>{document.querySelector("#"+t.dataset.dropdown).classList.add("hidden"),t.addEventListener("click",()=>{var a;a=t,e.forEach(e=>{a.dataset.dropdown===e.dataset.dropdown?document.querySelector("#"+a.dataset.dropdown).classList.toggle("hidden"):document.querySelector("#"+e.dataset.dropdown).classList.add("hidden")})})})}function addIcons(){document.querySelectorAll('[class^="icon-"], [class*=" icon-"]').forEach(e=>{let t="";for(let a=0;a<e.classList.length;a++)if(e.classList[a].startsWith("icon-")){t=e.classList[a];break}e.setAttribute("focusable",!1),e.setAttribute("aria-hidden",!0),e.setAttribute("viewBox","0 0 24 24"),e.setAttribute("height","1.4em"),e.innerHTML=`<use xlink:href="/assets/images/icons.svg#${t}"></use>`})}manageDropdowns(),addIcons(),document.addEventListener("changeLanguageCalled",addIcons);